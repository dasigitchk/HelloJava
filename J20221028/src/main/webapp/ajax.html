<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ajax.html</title>
</head>
<body>
	<h3>Ajax호출.</h3>
	<button>요청</button>
	<script>
		document.querySelector('button').addEventListener('click', loadData); 
		
		function loadData() {
			let ajax = new XMLHttpRequest();
			ajax.open('get','data/MOCK_DATA.json');  //ajax가 가진 메소드인 open()으로 요청페이지 지정.
			ajax.send(); // 요청.
			ajax.onload = loadCallback;  // event를 this 객체. data를 onload하면 함수실행.
		}
		// ajax객체에 onload 이벤트 발생시 실행할 callback 함수.
		function loadCallback() { 
				//console.log(ajax.responseText); //ajax객체출력. 변수에 어떤	값을 담고있는지 확인.
				let data = JSON.parse(this.responseText); //this가 ajax를 받음.
				let table = document.createElement('table');
				let tbody = document.createElement('tbody');
				data.forEach(row => {  //data의 개수만큼 반복. 함수를 매개값으로받음.
					tbody.append(makeTr(row));
				});
				table.append(tbody);
				document.getElementsByTagName('body')[0].append(table);
		}
		// data한건을 tr로 생성해주는 함수.
	function makeTr(obj) {
			let tr = document.createElement('tr');
			for(let field in obj) {
				let td = document.createElement('td');
				let txt = document.createTextNode(obj[field]);
				td.append(txt);
				tr.append(td);
				}
			return tr;
		}
	</script>
</body>
</html>